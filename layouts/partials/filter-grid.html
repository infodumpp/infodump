<section class="h-entry e-content container col">
  <div id="category-buttons" style="text-align:center; margin-bottom: 1.5rem;">
    <button class="fbtn active" data-cat="all">All</button>
    <button class="fbtn" data-cat="chemistry">Chemistry</button>
    <button class="fbtn" data-cat="physics">Physics</button>
    <button class="fbtn" data-cat="history">History</button>
    <button class="fbtn" data-cat="food-connoisseur">Connoisseur</button>
  </div>

  <div class="post-grid" id="post-grid">
    {{ range .Site.RegularPages }}
      {{ $cats := slice }}
      {{ with .Params.tags }}
        {{ $cats = . }}
      {{ end }}

      <a class="post-card {{ range $cats }}{{ . | urlize }} {{ end }}" href="{{ .RelPermalink}}">
        <div class="post-card-inner">
          {{ with .Params.image }}
            <div class="post-image" style="background-image: url('{{ . | relURL }}');"></div>
          {{ end }}
          <h3 class="post-title">{{ .Title }}</h3>
          <p class="post-date">{{ .Date.Format "Jan 2, 2006" }}</p>
        </div>
      </a>
    {{ end }}
  </div>
</section>

<!-- CATEGORY FILTER JS -->
<script>
(function () {
  const buttons = document.querySelectorAll('#category-buttons .fbtn');
  const posts = Array.from(document.querySelectorAll('.post-card'));

  function setActiveBtn(activeBtn) {
    buttons.forEach(b => b.classList.remove('active'));
    activeBtn.classList.add('active');
  }

  function filterPosts(cat) {
    posts.forEach(p => {
      if (cat === 'all') p.style.display = 'block';
      else p.style.display = p.classList.contains(cat) ? 'block' : 'none';
    });
  }

  buttons.forEach(btn => {
    btn.addEventListener('click', function () {
      const cat = this.getAttribute('data-cat');
      setActiveBtn(this);
      filterPosts(cat);
      if (cat === 'all') history.replaceState(null, '', location.pathname);
      else location.hash = cat;
    });
  });

  const hash = location.hash.replace('#','');
  if (hash) {
    const btn = Array.from(buttons).find(b => b.getAttribute('data-cat') === hash);
    if (btn) btn.click();
  }
})();
</script>

<!-- POST CARDS CSS -->
<style>
#category-buttons { 
  display: flex; 
  justify-content: center; 
  flex-wrap: nowrap; 
  gap: 5px; 
  margin-top: 0; 
  margin-bottom: 0.5rem; 
}

.fbtn { 
  padding: 3px 12px; 
  border-radius: 15px; 
  border: 1px solid #cea273; 
  background: #fcedd3; 
  color: #203B37;
  font-size: 16px; 
  cursor: pointer; 
  transition: .15s; 
}

.fbtn:hover { 
  background: #f0e0c5; 
  transform: translateY(-1px); 
}

.fbtn.active { 
  background: #203B37; 
  color: #fff; 
  border-color: #203B37; 
}

.post-grid { 
  display: grid; 
  grid-template-columns: repeat(2, 1fr); 
  gap: 20px; 
  max-width: 1000px; 
  max-height: 800px;
  margin: 9px auto; 
}

.post-card { 
  display: block; 
  border-radius: 10px; 
  overflow: hidden; 
  text-decoration: none; 
  color: inherit; 
  box-shadow: 0 18px 40px rgba(2,6,23,0.08); 
  transition: .18s; 
  background: #fff; 
}

.post-card:hover { 
  transform: translateY(-6px); 
  box-shadow: 0 22px 48px rgba(2,6,23,0.12); 
}

.post-card-inner { 
  display: flex-start; 
  flex-direction: column; 
  min-height: 60px;
  justify-content: center;
}

.post-image { 
  height: 200px; 
  background-size: cover; 
  background-position: center; 
  width: 100%; 
  aspect-ratio: 16/9; 
}

.post-title { 
  font-size: 20px; 
  font-weight: 700; 
  padding: 0.5px 8px; 
  color: #1f2937; 
  justify-content: center
}

.post-date {
  font-size: 12px;          /* smaller than the title */
  color: #666;              /* gray color */
  margin: 4px;     /* space around the date (top right/bottom) */
  font-weight: 400;         /* normal weight */
}
@media (max-width: 920px) { 
  .post-card { width: 350px; } 
  .post-title { font-size: 20px; } 
}

@media (max-width: 520px) { 
  .post-card { width: 100%; max-width: 480px; } 
  #category-buttons { padding: 0 12px; } 
}

</style>
