<div id="category-buttons" style="text-align:center; margin-bottom: 1.5rem;">
  <button class="fbtn active" data-cat="all">All</button>
  <button class="fbtn" data-cat="chemistry">Chemistry</button>
  <button class="fbtn" data-cat="connoisseur">Connoisseur</button>
  <button class="fbtn" data-cat="history">History</button>
  <button class="fbtn" data-cat="physics">Physics</button>
</div>

<div class="post-grid" id="post-grid">
  {{ range .Site.RegularPages.ByDate.Reverse }}
    {{ $cats := .Params.categories }}
    {{ if not (in .Params.tags "exclude-from-grid") }}
      <a class="post-card {{ range $i, $c := $cats }}{{ if $i }} {{ end }}{{ $c }}{{ end }}" href="{{ .Permalink }}">
        <div class="post-card-inner">
          <div class="post-image" style="background-image: url('{{ with .Params.image }}{{ . }}{{ else }}/img/default-card.jpg{{ end }}');"></div>
          <h3 class="post-title">{{ .Title }}</h3>
        </div>
      </a>
    {{ end }}
  {{ end }}
</div>
  
  <style>
  #category-buttons {
    display: flex;
    justify-content: center;
    flex-wrap: nowrap;
    gap: 10px; /* minimal space between buttons */
    margin-top: 0rem;
    margin-bottom: 0rem;
  }
  
  .fbtn {
    padding: 3px 2px;  
    border-radius: 12px;      /* pill-like shape */
    border: 1px solid #ccc;
    background: #f5f6f7;
    font-size: 18px;          /* smaller text */
    color: #333;
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    line-height: 1;
  }
  
  .fbtn:hover {
    background: #e9eaec;
    border-color: #999;
    transform: translateY(-1px);
  }
  
  .fbtn.active {
    background: #456882;      /* theme accent */
    color: #fff;
    border-color: #456882;
    box-shadow: 0 2px 4px rgba(69,104,130,0.3);
  }
  
  /* Post Grid */
  .post-grid {
    display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 30px;
  justify-content: center;
  margin-top: 0 auto;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 12px;
  box-sizing: border-box;
  padding: 1 20px;
  }
  
  .post-card {
    display: block;
    width: 420px;
    border-radius: 10px;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    box-shadow: 0 18px 40px rgba(2,6,23,0.08);
    transition: transform 0.18s, box-shadow 0.18s;
    background: #fff;
  }
  
  .post-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 22px 48px rgba(2,6,23,0.12);
  }
  
  .post-card-inner {
    display: flex;
    flex-direction: column;
  }
  
  .post-image {
    height: 240px;
    background-size: cover;
    background-position: center;
    width: 100%;
    aspect-ratio: 16 / 9;
  }
  
  .post-title {
    font-size: 28px;
    font-weight: 700;
    padding: 8px;
    margin: 1px;
    color: #1f2937;
  }
  
  /* Responsive */
  @media (max-width: 920px) {
    .post-card { width: 350px; }
    .post-image { height: 200px; }
    .post-title { font-size: 20px; }
  }
  
  @media (max-width: 520px) {
    .post-card { width: 100%; max-width: 480px; }
    #category-buttons { padding: 0 12px; }
  }
  </style>
  
  <script>
  (function () {
    const buttons = document.querySelectorAll('#category-buttons .fbtn');
    const posts   = Array.from(document.querySelectorAll('.post-card'));
  
    function setActiveBtn(activeBtn) {
      buttons.forEach(b => b.classList.remove('active'));
      activeBtn.classList.add('active');
    }
  
    function filterPosts(cat) {
      posts.forEach(p => {
        if (cat === 'all') {
          p.style.display = 'block';
        } else {
          p.style.display = p.classList.contains(cat) ? 'block' : 'none';
        }
      });
    }
  
    buttons.forEach(btn => {
      btn.addEventListener('click', function () {
        const cat = this.getAttribute('data-cat');
        setActiveBtn(this);
        filterPosts(cat);
        if (cat === 'all') history.replaceState(null, '', location.pathname);
        else location.hash = cat;
      });
    });
  
    const hash = location.hash.replace('#','');
    if (hash) {
      const btn = Array.from(buttons).find(b => b.getAttribute('data-cat') === hash);
      if (btn) btn.click();
    }
  })();
  </script>  