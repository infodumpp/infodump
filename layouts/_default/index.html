{{ define "main" }}
<meta name="google-site-verification" content="4hde77tmLAm9a1SIduho4XDWwvf1T4UgYoLJz5xter4" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4710986402681136" crossorigin="anonymous"></script>

<section class="hero">
  <h1 class="p-name">{{ .Site.Title }}</h1>
  {{ with .Site.Params.subtitle }}
    <p class="subtitle">I post <a href="/tags/notes/"> notes </a> by subject and <a href="/tags/">level</a> , resources, and <a href="/tags/food-connoisseur/"> food reviews</a></p>
  {{ end }}
</section>

<section class="h-entry e-content container col">
  <div id="category-buttons" style="text-align:center; margin-bottom: 1.5rem;">
    <button class="fbtn active" data-cat="all">All</button>
    <button class="fbtn" data-cat="math">FMath & Math Notes</button>
    <button class="fbtn" data-cat="chemistry">Chem Notes</button>
    <button class="fbtn" data-cat="physics">Phy Notes</button>
    <button class="fbtn" data-cat="history">Hist Notes</button>
    <button class="fbtn" data-cat="food-connoisseur">Connoisseur</button>
  </div>

<!-- SEARCH BAR -->
<div id="search-container">
  <input
    id="search-input"
    type="text"
    placeholder="Search for posts..."
    style="
      width: 100%;
      max-width: 550px;
      margin: 12px auto 24px;
      display: block;
      padding: 8px 5px;
      border-radius: 12px;
      border: 1px solid #e9eaec;
      color:#fff;
      font-size: 14px;
      outline: none;
    "
  />
</div>



<!-- SEARCH FILTER JS -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const searchInput = document.getElementById('search-input');
    if (!searchInput) return;
  
    searchInput.addEventListener('input', function () {
      const query = this.value.toLowerCase();
      const posts = document.querySelectorAll('.post-card');
  
      posts.forEach(post => {
        const title = post.querySelector('.post-title');
        const text = title ? title.textContent.toLowerCase() : '';
        post.style.display = text.includes(query) ? 'block' : 'none';
      });
    });
  });
  </script>

  <div class="post-grid" id="post-grid">
    {{ range .Site.RegularPages }}
      {{ $cats := slice }}
      {{ with .Params.tags }}
        {{ $cats = . }}
      {{ end }}
  
      <a class="post-card {{ range $cats }}{{ . | urlize }} {{ end }}"
         href="{{ .RelPermalink }}">
        <div class="post-card-inner">
          {{ with .Params.image }}
            <div class="post-image"
                 style="background-image: url('{{ . | relURL }}');"></div>
          {{ end }}
  
          <h3 class="post-title">{{ .Title }}</h3>
          <p class="post-date">{{ .Date.Format "Jan 2, 2006" }}</p>
        </div>
      </a>
  
    {{ end }}
  </div>
  
  

<!-- CATEGORY FILTER JS -->
<script>
  (function () {
    const buttons = document.querySelectorAll('#category-buttons .fbtn');
    const posts = Array.from(document.querySelectorAll('.post-card'));
  
    function setActiveBtn(activeBtn) {
      buttons.forEach(b => b.classList.remove('active'));
      activeBtn.classList.add('active');
    }
  
    function filterPosts(cat) {
      posts.forEach(p => {
        if (cat === 'all') p.style.display = 'block';
        else p.style.display = p.classList.contains(cat) ? 'block' : 'none';
      });
    }
  
    buttons.forEach(btn => {
      btn.addEventListener('click', function () {
        const cat = this.getAttribute('data-cat');
        setActiveBtn(this);
        filterPosts(cat);
        if (cat === 'all') history.replaceState(null, '', location.pathname);
        else location.hash = cat;
      });
    });
  
    const hash = location.hash.replace('#','');
    if (hash) {
      const btn = Array.from(buttons).find(b => b.getAttribute('data-cat') === hash);
      if (btn) btn.click();
    }
  })();
  </script>

<!-- POST CARDS CSS -->
<style>
#category-buttons { 
  display: flex; 
  justify-content: center; 
  flex-wrap: nowrap; 
  gap: 5px; 
  margin-top: 0; 
  margin-bottom: 0.5rem; 
}

.fbtn { 
  padding: 3px 10px; 
  border-radius: 15px; 
  border: 1px solid #cea273; 
  background: #fcedd3; 
  color: #002147;
  font-size: 15px; 
  cursor: pointer; 
  transition: .15s; 
}

.fbtn:hover { 
  background: #cea273; 
  transform: translateY(-1px); 
}

.fbtn.active { 
  background: #59897d; 
  color: #fff; 
  border-color: #203b37; 
}

.post-grid { 
  display: grid; 
  grid-template-columns: repeat(2, 1fr); 
  gap: 20px; 
  max-width: 1000px; 
  margin: 8px auto; 
}

.post-card { 
  display: block; 
  border-radius: 20px; 
  overflow: hidden; 
  text-decoration: none; 
  color: inherit; 
  box-shadow: 0 18px 40px rgba(2,6,23,0.08); 
  transition: .18s; 
  background: #fff; 
}

.post-card:hover { 
  transform: translateY(-6px); 
  box-shadow: 0 22px 48px rgba(2,6,23,0.12); 
}

.post-card-inner { 
  display: flex-start; 
  flex-direction: column; 
  min-height: 30px;
  justify-content: center;
}

.post-image { 
  height: 150px; 
  background-size: cover; 
  background-position: center; 
  width: 100%; 
  aspect-ratio: 16/9; 
}

.post-title { 
  font-size: 15px; 
  font-weight: 600; 
  padding: 0px 2px 0px; 
  color: #1f2937; 
  justify-content: center
}

.post-date {
  font-size: 12px;          /* smaller than the title */
  color: #203b37;              /* gray color */
  margin: 2px 12px;     /* space around the date (top right/bottom) */
  font-weight: 400;         /* normal weight */
}
@media (max-width: 920px) { 
  .post-card { width: 100%; } 
  .post-title { font-size: 20px; } 
}

@media (max-width: 600px) {
  .post-grid {
    grid-template-columns: 1fr;   /* single column */
    max-height: none;             /* remove clipping */
    padding: 0 12px;
  }
}

@media (max-width: 520px) { 
  .post-card { width: 100%; max-width: 480px; } 
  #category-buttons { padding: 0 12px; } 
}
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin: 40px 0;
}

.pagination a {
  text-decoration: none;
  padding: 8px 14px;
  border-radius: 8px;
  background: #fcedd3;
  color: #002147;
  font-weight: 500;
}

.pagination a:hover {
  background: #e9eaec;
}

</style>

{{ end }}